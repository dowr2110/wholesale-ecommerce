@using wholesale.Controllers;
@using wholesale.Models;
@{
    Layout = "../Shared/GeneralLayout.cshtml";

    string username = ViewBag.username; ViewBag.usernameGL = username;

    int countInCart = ViewBag.countInCart; ViewBag.countInCartGL = countInCart;
    int countInWish = ViewBag.countInWish; ViewBag.countInWishGL = countInWish;

    int user_id = ViewBag.user_id; ViewBag.user_idGL = user_id;

    string prod_name = ViewBag.prod_name;
    string price = ViewBag.price;
    int id = ViewBag.id;
    int count = 1;


    string discription = ViewBag.discription;
    int category_id = ViewBag.category_id;
    int compane_id = ViewBag.compane_id;

    var categories = ViewBag.categories;
    var comments = ViewBag.comments;
    var users = ViewBag.users;

    var wishlists = ViewBag.wishlists;

}

    <!--================ End Header Menu Area =================-->
    <!-- ================ start banner area ================= -->
    <section class="blog-banner-area" id="blog">
        <div class="container h-100">
            <div class="blog-banner">
                <div class="text-center">
                    <h1>Shop Single</h1>
                    <nav aria-label="breadcrumb" class="banner-breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="#">Home</a></li>
                            <li class="breadcrumb-item active" aria-current="page">Shop Single</li>
                        </ol>
                    </nav>
                </div>
            </div>
        </div>
    </section>
    <!-- ================ end banner area ================= -->
    <!--================Single Product Area =================-->
    <div class="product_image_area">
        <div class="container">
            <div class="row s_product_inner">
                <div class="col-lg-6">
                    <div class="owl-carousel owl-theme s_Product_carousel">
                        <div class="single-prd-item">
                            <img style="max-height:360px; max-width:400px" class="img-fluid" src="../../Content/img/product/@(prod_name).png" alt="">
                        </div>
                        <!-- <div class="single-prd-item">
                            <img class="img-fluid" src="img/category/s-p1.jpg" alt="">
                        </div>
                        <div class="single-prd-item">
                            <img class="img-fluid" src="img/category/s-p1.jpg" alt="">
                        </div> -->
                    </div>
                </div>
                <div class="col-lg-5 offset-lg-1">
                    <div class="s_product_text">
                        <h3>@prod_name</h3>
                        <h2>@price$</h2>
                        <ul class="list">
                            <li><a class="active" href="#">
                            <span>Category</span> :  @{
                                foreach (Category item in categories)
                                {
                                    if (item.Id == category_id)
                                    {
                                        @item.Category_name;
                                    }
                                }
                            }
                        </a></li>
                            <li><a href="#"><span>Availibility</span> : In Stock</a></li>
                        </ul>
                        <p>
                            @discription
                        </p>
                        <div class="product_count">
                            @*<label for="qty">Quantity:</label>
                            <button onclick="var result = document.getElementById('sst'); var sst = result.value; if( !isNaN( sst )) result.value++;return false;"
                                    class="increase items-count" type="button">
                                <i class="ti-angle-left"></i>
                            </button>*@
                           @* <input type="text" name="qty" id="sst" size="2" maxlength="12" value="@count" title="Quantity:" class="input-text qty">
                            <button onclick="var result = document.getElementById('sst'); var sst = result.value; if( !isNaN( sst ) &amp;&amp; sst > 0 ) result.value--;return false;"
                                    class="reduced items-count" type="button">
                                <i class="ti-angle-right"></i>
                            </button>*@
                            <a class="button primary-btn" href="~/Product/AddToCard?product_id2=@id&count=@count&user_id=@user_id">Add to Cart</a>
                        </div>
                        <div class="card_area d-flex align-items-center">
                            @{
                                int flag = 0;
                                foreach (Wishlist iii in wishlists)
                                {

                                    if (iii.ProductId == id && iii.UserId == user_id)
                                    {
                                        flag++;
                                    }

                                }
                                if (flag > 0)
                                {
                                    <a class="icon_btn" style="color:red" href="~/Product/AddToWishList2?product_id2=@id&count=1&user_id=@user_id"><i class="lnr lnr lnr-heart"></i></a>

                                }
                                else
                                {
                                    <a class="icon_btn"  href="~/Product/AddToWishList2?product_id2=@id&count=1&user_id=@user_id"><i class="lnr lnr lnr-heart"></i></a>

                                }
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--================End Single Product Area =================-->
    <!--================Product Description Area =================-->
    <section class="product_description_area">
        <div class="container">
            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Description</a>
                </li>
              @*  <li class="nav-item">
                    <a class="nav-link active" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile"
                       aria-selected="false">Specification</a>
                </li>*@
                <li class="nav-item">
                    <a class="nav-link" id="contact-tab" data-toggle="tab" href="#contact" role="tab" aria-controls="contact"
                       aria-selected="false">Comments</a>
                </li>
               @* <li class="nav-item">
                    <a class="nav-link active" id="review-tab" data-toggle="tab" href="#review" role="tab" aria-controls="review"
                       aria-selected="false">Reviews</a>
                </li>*@
            </ul>
            <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                    <p>
                        @discription
                    </p>
                    <p>
                        It is often frustrating to attempt to plan meals that are designed for one. Despite this fact, we are seeing
                        more and more recipe books and Internet websites that are dedicated to the act of cooking for one. Divorce and
                        the death of spouses or grown children leaving for college are all reasons that someone accustomed to cooking for
                        more than one would suddenly need to learn how to adjust all the cooking practices utilized before into a
                        streamlined plan of cooking that is more efficient for one person creating less
                    </p>
                </div>
                
                <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="comment_list">
                                @{ 
                                    foreach (Comment it in comments)
                                    {


                                <div class="review_item">
                                    <div class="media">
                                        <div class="d-flex">
                                            <img src="img/product/review-1.png" alt="">
                                        </div>
                                        <div class="media-body">
                                                                            <h4>
                                                                                @foreach (User item in users)
                                                                                {
                                                                                if (item.Id == it.UserId)
                                                                                {
                                                                                    @item.Username;
                                                                                }
                                                                                }
                                                                            </h4>
                                            <h5>@it.Date</h5>
                                            @*<a class="reply_btn" href="#">Reply</a>*@
                                        </div>
                                    </div>
                                    <p>
                                       @it.Text
                                    </p>
                                </div>
                                        }
                                    }
                          
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="review_box">
                                <h4>Post a comment</h4>
                                <form class="row contact_form" action="~/Product/PostCommentSave?user_id=@user_id&product_id2=@id" method="post" id="contactForm" novalidate="novalidate">
                                 
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <input type="text" class="form-control" name="message" id="message" rows="1" placeholder="Message">
                                        </div>
                                    </div>
                                    <div class="col-md-12 text-right">
                                        <button type="submit" value="submit" class="btn primary-btn">Submit Now</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            
            </div>
        </div>
    </section>
    <!--================End Product Description Area =================-->
    <!--================ Start related Product area =================-->
    <section class="related-product-area section-margin--small mt-0">
        <div class="container">
            <div class="section-intro pb-60px">
                <p>Popular Item in the market</p>
                <h2>Top <span class="section-intro__style">Product</span></h2>
            </div>
            <div class="row mt-30">
               




            </div>
        </div>
    </section>
    <!--================ end related Product area =================-->
    <!--================ Start footer Area  =================-->
   